<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>HTML</title>
  
  <!-- HTML -->
  

  <!-- Custom Styles -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tile Match</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --accent: #fd79a8;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #d63031;
            --bonus: #2ed573;
            --ad: #0984e3;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background-color: #f5f6fa;
            color: var(--dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            touch-action: manipulation;
        }
        
        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .splash-logo-space {
            height: 150px;
            width: 150px;
            margin-bottom: 30px;
            /* Empty space for future logo */
        }
        
        .loading-bar {
            width: 80%;
            max-width: 300px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .loading-progress {
            height: 100%;
            width: 0%;
            background-color: var(--primary);
            transition: width 2s linear;
        }
        
        /* Main Menu Styles */
        .main-menu {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 500px;
            gap: 15px;
            margin-top: 50px;
        }
        
        .menu-title {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .menu-button {
            width: 100%;
            max-width: 300px;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background-color: var(--primary);
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .menu-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        .menu-button:active {
            transform: translateY(0);
        }
        
        .menu-button.secondary {
            background-color: var(--secondary);
        }
        
        .menu-button.settings {
            background-color: var(--accent);
        }
        
        .menu-button.leaderboard {
            background-color: var(--warning);
            color: var(--dark);
        }
        
        /* Game Page Styles (initially hidden) */
        .game-page {
            display: none;
            width: 100%;
            max-width: 800px;
        }
        
        header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: var(--primary);
            font-size: 1.8rem;
            text-align: center;
        }
        
        .game-info {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .info-box {
            background-color: var(--light);
            padding: 8px 12px;
            border-radius: 8px;
            text-align: center;
            min-width: 70px;
            flex: 1;
        }
        
        .info-box h3 {
            font-size: 0.8rem;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .info-box p {
            font-size: 1.1rem;
            font-weight: bold;
        }
        
        .game-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            width: 100%;
            margin: 0 auto;
        }
        
        .card {
            aspect-ratio: 1;
            background-color: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.6s;
            position: relative;
            transform-style: preserve-3d;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            user-select: none;
        }
        
        .card .front, .card .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }
        
        .card .front {
            background-color: white;
            transform: rotateY(180deg);
            color: var(--primary);
        }
        
        .card .back {
            background-color: var(--primary);
            color: white;
            transform: rotateY(0deg);
        }
        
        .card.flipped {
            transform: rotateY(180deg);
        }
        
        .card.matched {
            background-color: var(--success);
            cursor: default;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            background-color: var(--primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            font-size: 0.9rem;
            min-width: 100px;
        }
        
        button:hover {
            background-color: #5649c0;
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button.secondary {
            background-color: var(--secondary);
        }
        
        button.danger {
            background-color: var(--danger);
        }
        
        .hint-btn.ad-mode {
            background-color: var(--ad);
        }
        
        .timer-bar {
            width: 100%;
            height: 6px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-top: 8px;
            overflow: hidden;
        }
        
        .timer-progress {
            height: 100%;
            background-color: var(--primary);
            width: 100%;
            transition: width 1s linear;
        }
        
        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            color: white;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            padding: 20px;
        }
        
        .modal.show {
            opacity: 1;
            pointer-events: all;
        }
        
        .modal-content {
            background-color: white;
            color: var(--dark);
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal h2 {
            color: var(--primary);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .modal p {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .modal button {
            margin-top: 15px;
            width: 100%;
        }
        
        /* Level Complete Modal */
        .level-complete {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            color: var(--dark);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
            display: none;
        }
        
        .level-complete h2 {
            color: var(--success);
            margin-bottom: 20px;
        }
        
        .level-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .level-stat {
            text-align: center;
        }
        
        .level-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .level-stat-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        .hint-reward {
            background-color: var(--bonus);
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 15px 0;
            font-weight: bold;
        }
        
        /* Leaderboard Styles */
        .score-list {
            list-style: none;
            width: 100%;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(0, 0, 0, 0.05);
            margin-bottom: 5px;
            border-radius: 5px;
            flex-wrap: wrap;
        }
        
        .score-item:nth-child(1) {
            background-color: gold;
            font-weight: bold;
        }
        
        .score-item:nth-child(2) {
            background-color: silver;
        }
        
        .score-item:nth-child(3) {
            background-color: #cd7f32; /* bronze */
        }
        
        .all-time-best {
            background-color: var(--primary);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        /* Settings checkboxes */
        .setting-option {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .setting-option label {
            margin-left: 10px;
        }
        
        /* Music selector */
        .music-selector {
            width: 100%;
            margin-bottom: 15px;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        
        /* Username input */
        .username-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-size: 1rem;
        }
        
        /* Ad Modal */
        .ad-container {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
            border: 1px dashed #ccc;
        }
        
        .ad-text {
            font-style: italic;
            color: #666;
            margin-bottom: 10px;
        }
        
        .watch-ad-btn {
            background: var(--ad);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .watch-ad-btn:hover {
            background: #0877d6;
        }
        
        @media (max-width: 600px) {
            .menu-title {
                font-size: 2rem;
            }
            
            .menu-button {
                font-size: 1rem;
                padding: 12px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .info-box {
                min-width: 60px;
                padding: 5px 8px;
            }
            
            .info-box h3 {
                font-size: 0.7rem;
            }
            
            .info-box p {
                font-size: 1rem;
            }
            
            .card .front, .card .back {
                font-size: 1.5rem;
            }
            
            button {
                padding: 8px 12px;
                min-width: 80px;
                font-size: 0.8rem;
            }
            
            .game-board {
                gap: 8px;
            }
            
            .score-item {
                flex-direction: column;
            }
            
            .score-item span {
                margin-bottom: 3px;
            }
            
            .level-stats {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splash-screen">
        <div class="splash-logo-space"></div>
        <div class="loading-bar">
            <div class="loading-progress" id="loading-progress"></div>
        </div>
    </div>

    <!-- Main Menu -->
    <div class="main-menu" id="main-menu">
        <h1 class="menu-title">Tile Match</h1>
        <button class="menu-button" id="new-game-btn">New Game</button>
        <button class="menu-button secondary" id="continue-btn">Continue</button>
        <button class="menu-button settings" id="settings-btn">Settings</button>
        <button class="menu-button leaderboard" id="leaderboard-btn">Leaderboard</button>
    </div>
    
    <!-- Game Page (initially hidden) -->
    <div class="game-page" id="game-page">
        <header>
            <h1>Tile Match</h1>
            <div class="game-info">
                <div class="info-box">
                    <h3>Level</h3>
                    <p id="level">1</p>
                </div>
                <div class="info-box">
                    <h3>Score</h3>
                    <p id="score">0</p>
                </div>
                <div class="info-box">
                    <h3>Moves</h3>
                    <p id="moves">0</p>
                </div>
                <div class="info-box">
                    <h3>Time</h3>
                    <p id="time">60</p>
                    <div class="timer-bar">
                        <div class="timer-progress" id="timer-progress"></div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="game-container">
            <div class="game-board" id="game-board"></div>
            <div class="controls">
                <button id="hint-btn" class="secondary">Hint (<span id="hint-count">2</span>)</button>
                <button class="danger" id="quit">Quit</button>
            </div>
        </div>
    </div>
    
    <!-- Level Complete Modal -->
    <div class="level-complete" id="level-complete">
        <h2>Level Complete!</h2>
        <div class="level-stats">
            <div class="level-stat">
                <div class="level-stat-value" id="complete-level">1</div>
                <div class="level-stat-label">Level</div>
            </div>
            <div class="level-stat">
                <div class="level-stat-value" id="complete-moves">0</div>
                <div class="level-stat-label">Moves</div>
            </div>
            <div class="level-stat">
                <div class="level-stat-value" id="complete-score">0</div>
                <div class="level-stat-label">Score</div>
            </div>
        </div>
        <div class="hint-reward">
            +1 Hint Reward!
        </div>
        <button id="next-level-btn" class="modal-btn">Next Level</button>
    </div>
    
    <!-- Settings Modal -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <h2>Settings</h2>
            <div class="setting-option">
                <input type="checkbox" id="sound-toggle" checked>
                <label for="sound-toggle">Sound Effects</label>
            </div>
            <div class="setting-option">
                <input type="checkbox" id="music-toggle" checked>
                <label for="music-toggle">Background Music</label>
            </div>
            <select class="music-selector" id="music-selector">
                <option value="1">Upbeat Game Music</option>
                <option value="2">Happy Tune</option>
                <option value="3">Sunny Melody</option>
                <option value="4">Adventure Theme</option>
                <option value="5">Mystery Alert</option>
            </select>
            <button id="about-btn">About Game</button>
            <button id="privacy-btn">Privacy Policy</button>
            <button id="close-settings">Close</button>
        </div>
    </div>
    
    <!-- About Modal -->
    <div class="modal" id="about-modal">
        <div class="modal-content">
            <h2>About Tile Match</h2>
            <p>Tile Match is a memory matching game where you flip tiles to find matching pairs.</p>
            <p>Complete levels by matching all tiles before time runs out!</p>
            <p>Version: 1.0.0</p>
            <button id="close-about">Close</button>
        </div>
    </div>
    
    <!-- Privacy Policy Modal -->
    <div class="modal" id="privacy-modal">
        <div class="modal-content">
            <h2>Privacy Policy</h2>
            <div style="text-align: left; font-size: 0.9rem; line-height: 1.5;">
                <p><strong>Privacy Policy</strong></p>
                <p>This privacy policy applies to the Tile Match app (hereby referred to as "Application") for mobile devices that was created by Crazyvoolabs (hereby referred to as "Service Provider") as an Ad Supported service. This service is intended for use "AS IS".</p>
                
                <p><strong>Information Collection and Use</strong></p>
                <p>The Application collects information when you download and use it. This information may include information such as</p>
                <ul>
                    <li>Your device's Internet Protocol address (e.g. IP address)</li>
                    <li>The pages of the Application that you visit, the time and date of your visit, the time spent on those pages</li>
                    <li>The time spent on the Application</li>
                    <li>The operating system you use on your mobile device</li>
                </ul>
                
                <p>The Application does not gather precise information about the location of your mobile device.</p>
                
                <p>The Application collects your device's location, which helps the Service Provider determine your approximate geographical location and make use of in below ways:</p>
                <ul>
                    <li>Geolocation Services: The Service Provider utilizes location data to provide features such as personalized content, relevant recommendations, and location-based services.</li>
                    <li>Analytics and Improvements: Aggregated and anonymized location data helps the Service Provider to analyze user behavior, identify trends, and improve the overall performance and functionality of the Application.</li>
                    <li>Third-Party Services: Periodically, the Service Provider may transmit anonymized location data to external services. These services assist them in enhancing the Application and optimizing their offerings.</li>
                </ul>
                
                <p>The Service Provider may use the information you provided to contact you from time to time to provide you with important information, required notices and marketing promotions.</p>
                
                <p>For a better experience, while using the Application, the Service Provider may require you to provide us with certain personally identifiable information. The information that the Service Provider request will be retained by them and used as described in this privacy policy.</p>
                
                <p><strong>Third Party Access</strong></p>
                <p>Only aggregated, anonymized data is periodically transmitted to external services to aid the Service Provider in improving the Application and their service. The Service Provider may share your information with third parties in the ways that are described in this privacy statement.</p>
                
                <p>Please note that the Application utilizes third-party services that have their own Privacy Policy about handling data. Below are the links to the Privacy Policy of the third-party service providers used by the Application:</p>
                <ul>
                    <li><a href="https://support.google.com/admob/answer/6128543?hl=en" target="_blank">AdMob</a></li>
                </ul>
                
                <p>The Service Provider may disclose User Provided and Automatically Collected Information:</p>
                <ul>
                    <li>as required by law, such as to comply with a subpoena, or similar legal process;</li>
                    <li>when they believe in good faith that disclosure is necessary to protect their rights, protect your safety or the safety of others, investigate fraud, or respond to a government request;</li>
                    <li>with their trusted services providers who work on their behalf, do not have an independent use of the information we disclose to them, and have agreed to adhere to the rules set forth in this privacy statement.</li>
                </ul>
                
                <p><strong>Opt-Out Rights</strong></p>
                <p>You can stop all collection of information by the Application easily by uninstalling it. You may use the standard uninstall processes as may be available as part of your mobile device or via the mobile application marketplace or network.</p>
                
                <p><strong>Data Retention Policy</strong></p>
                <p>The Service Provider will retain User Provided data for as long as you use the Application and for a reasonable time thereafter. If you'd like them to delete User Provided Data that you have provided via the Application, please contact them at crazyvoolabs@gmail.com and they will respond in a reasonable time.</p>
                
                <p><strong>Children</strong></p>
                <p>The Service Provider does not use the Application to knowingly solicit data from or market to children under the age of 13.</p>
                
                <p>The Application does not address anyone under the age of 13. The Service Provider does not knowingly collect personally identifiable information from children under 13 years of age. In the case the Service Provider discover that a child under 13 has provided personal information, the Service Provider will immediately delete this from their servers. If you are a parent or guardian and you are aware that your child has provided us with personal information, please contact the Service Provider (crazyvoolabs@gmail.com) so that they will be able to take the necessary actions.</p>
                
                <p><strong>Security</strong></p>
                <p>The Service Provider is concerned about safeguarding the confidentiality of your information. The Service Provider provides physical, electronic, and procedural safeguards to protect information the Service Provider processes and maintains.</p>
                
                <p><strong>Changes</strong></p>
                <p>This Privacy Policy may be updated from time to time for any reason. The Service Provider will notify you of any changes to the Privacy Policy by updating this page with the new Privacy Policy. You are advised to consult this Privacy Policy regularly for any changes, as continued use is deemed approval of all changes.</p>
                
                <p>This privacy policy is effective as of 2025-07-28</p>
                
                <p><strong>Your Consent</strong></p>
                <p>By using the Application, you are consenting to the processing of your information as set forth in this Privacy Policy now and as amended by us.</p>
                
                <p><strong>Contact Us</strong></p>
                <p>If you have any questions regarding privacy while using the Application, or have questions about the practices, please contact the Service Provider via email at crazyvoolabs@gmail.com.</p>
                
                <hr>
                
                <p style="font-size: 0.8rem;">This privacy policy page was generated by <a href="https://app-privacy-policy-generator.nisrulz.com/" target="_blank">App Privacy Policy Generator</a></p>
            </div>
            <button id="close-privacy">Close</button>
        </div>
    </div>
    
    <!-- Leaderboard Modal -->
    <div class="modal" id="leaderboard-modal">
        <div class="modal-content">
            <h2>Leaderboard</h2>
            <div class="all-time-best" id="all-time-best">
                All-Time Best: Loading...
            </div>
            <ul class="score-list" id="score-list"></ul>
            <button id="close-leaderboard">Close</button>
        </div>
    </div>
    
    <!-- Ad Modal -->
    <div class="modal" id="ad-modal">
        <div class="modal-content">
            <h2>Get More Hints</h2>
            <p>Watch a short ad to get an extra hint!</p>
            <div class="ad-container">
                <p class="ad-text">[Advertisement would appear here]</p>
                <button id="watch-ad-btn" class="watch-ad-btn">Watch Ad</button>
            </div>
            <button id="cancel-ad-btn" class="modal-btn">Cancel</button>
        </div>
    </div>
    
    <!-- Username Modal -->
    <div class="modal" id="username-modal">
        <div class="modal-content">
            <h2>Enter Your Name</h2>
            <input type="text" id="username-input" class="username-input" placeholder="Your name" maxlength="20">
            <button id="save-username">Save</button>
        </div>
    </div>
    
    <!-- Audio Elements -->
    <audio id="flip-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-card-flip-1560.mp3" preload="auto"></audio>
    <audio id="match-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-beep-221.mp3" preload="auto"></audio>
    <audio id="win-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" preload="auto"></audio>
    <audio id="bg-music1" loop src="https://assets.mixkit.co/music/preview/mixkit-game-show-suspense-waiting-668.mp3" preload="auto"></audio>
    <audio id="bg-music2" loop src="https://assets.mixkit.co/music/preview/mixkit-happy-times-1580.mp3" preload="auto"></audio>
    <audio id="bg-music3" loop src="https://assets.mixkit.co/music/preview/mixkit-sunny-happy-1320.mp3" preload="auto"></audio>
    <audio id="bg-music4" loop src="https://assets.mixkit.co/music/preview/mixkit-the-start-of-a-new-adventure-1320.mp3" preload="auto"></audio>
    <audio id="bg-music5" loop src="https://assets.mixkit.co/music/preview/mixkit-video-game-mystery-alert-235.mp3" preload="auto"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Game state
            const state = {
                level: 1,
                score: 0,
                moves: 0,
                time: 0,
                timer: null,
                flippedCards: [],
                matchedPairs: 0,
                totalPairs: 0,
                hintCount: 2, // Start with 2 hints
                gameActive: false,
                timeLimit: 60,
                timeLeft: 60,
                maxLevel: 50,
                soundEnabled: true, // Sound enabled by default
                musicEnabled: true, // Music enabled by default
                currentMusic: 1,
                savedGame: null,
                username: localStorage.getItem('tileMatchUsername') || '',
                scoreMultipliers: [1, 1.1, 1.2, 1.3, 1.5, 1.7, 2, 2.3, 2.7, 3],
                emojiThemes: [
                    ['ðŸŽ', 'ðŸ', 'ðŸŠ', 'ðŸ‹', 'ðŸŒ', 'ðŸ‰', 'ðŸ‡', 'ðŸ“', 'ðŸ’', 'ðŸ‘', 'ðŸ', 'ðŸ¥'],
                    ['âš½', 'ðŸ€', 'ðŸˆ', 'âš¾', 'ðŸŽ¾', 'ðŸ', 'ðŸ‰', 'ðŸŽ±', 'ðŸ“', 'ðŸ¸', 'ðŸ’', 'ðŸ‘'],
                    ['ðŸš—', 'ðŸš•', 'ðŸš™', 'ðŸšŒ', 'ðŸšŽ', 'ðŸŽ', 'ðŸš“', 'ðŸš‘', 'ðŸš’', 'ðŸš', 'ðŸšš', 'ðŸš›'],
                    ['ðŸŒ', 'ðŸŒŽ', 'ðŸŒ', 'ðŸŒ•', 'ðŸŒ–', 'ðŸŒ—', 'ðŸŒ˜', 'ðŸŒ‘', 'ðŸŒ’', 'ðŸŒ“', 'ðŸŒ”', 'ðŸŒ™'],
                    ['ðŸ•', 'ðŸ”', 'ðŸŸ', 'ðŸŒ­', 'ðŸ¿', 'ðŸ¥¨', 'ðŸ¦', 'ðŸ©', 'ðŸª', 'ðŸŽ‚', 'ðŸ«', 'ðŸ­'],
                    ['âš¡', 'ðŸ”¥', 'ðŸ’§', 'ðŸŒŠ', 'ðŸƒ', 'ðŸŒª', 'â„ï¸', 'â˜€ï¸', 'ðŸŒ™', 'â­', 'ðŸŒˆ', 'â˜ï¸'],
                    ['ðŸŽ®', 'ðŸ‘¾', 'ðŸ•¹ï¸', 'ðŸŽ²', 'â™Ÿï¸', 'ðŸŽ¯', 'ðŸŽ³', 'ðŸŽ°', 'ðŸŽ¨', 'ðŸ§©', 'ðŸ†', 'ðŸ…'],
                    ['â¤ï¸', 'ðŸ§¡', 'ðŸ’›', 'ðŸ’š', 'ðŸ’™', 'ðŸ’œ', 'ðŸ–¤', 'ðŸ¤', 'ðŸ¤Ž', 'ðŸ’”', 'â£ï¸', 'ðŸ’•']
                ]
            };
            
            // DOM elements
            const splashScreen = document.getElementById('splash-screen');
            const loadingProgress = document.getElementById('loading-progress');
            const mainMenu = document.getElementById('main-menu');
            const gamePage = document.getElementById('game-page');
            const newGameBtn = document.getElementById('new-game-btn');
            const continueBtn = document.getElementById('continue-btn');
            const settingsBtn = document.getElementById('settings-btn');
            const leaderboardBtn = document.getElementById('leaderboard-btn');
            
            const levelDisplay = document.getElementById('level');
            const scoreDisplay = document.getElementById('score');
            const movesDisplay = document.getElementById('moves');
            const timeDisplay = document.getElementById('time');
            const timerProgress = document.getElementById('timer-progress');
            const gameBoard = document.getElementById('game-board');
            const hintBtn = document.getElementById('hint-btn');
            const hintCountDisplay = document.getElementById('hint-count');
            const quitBtn = document.getElementById('quit');
            
            // Modal elements
            const settingsModal = document.getElementById('settings-modal');
            const aboutModal = document.getElementById('about-modal');
            const privacyModal = document.getElementById('privacy-modal');
            const leaderboardModal = document.getElementById('leaderboard-modal');
            const usernameModal = document.getElementById('username-modal');
            const levelCompleteModal = document.getElementById('level-complete');
            const completeLevelDisplay = document.getElementById('complete-level');
            const completeMovesDisplay = document.getElementById('complete-moves');
            const completeScoreDisplay = document.getElementById('complete-score');
            const nextLevelBtn = document.getElementById('next-level-btn');
            const adModal = document.getElementById('ad-modal');
            const watchAdBtn = document.getElementById('watch-ad-btn');
            const cancelAdBtn = document.getElementById('cancel-ad-btn');
            
            const soundToggle = document.getElementById('sound-toggle');
            const musicToggle = document.getElementById('music-toggle');
            const musicSelector = document.getElementById('music-selector');
            const aboutBtn = document.getElementById('about-btn');
            const privacyBtn = document.getElementById('privacy-btn');
            const closeSettings = document.getElementById('close-settings');
            const closeAbout = document.getElementById('close-about');
            const closePrivacy = document.getElementById('close-privacy');
            const closeLeaderboard = document.getElementById('close-leaderboard');
            const scoreList = document.getElementById('score-list');
            const allTimeBest = document.getElementById('all-time-best');
            const usernameInput = document.getElementById('username-input');
            const saveUsernameBtn = document.getElementById('save-username');
            
            // Audio elements
            const flipSound = document.getElementById('flip-sound');
            const matchSound = document.getElementById('match-sound');
            const winSound = document.getElementById('win-sound');
            const bgMusic1 = document.getElementById('bg-music1');
            const bgMusic2 = document.getElementById('bg-music2');
            const bgMusic3 = document.getElementById('bg-music3');
            const bgMusic4 = document.getElementById('bg-music4');
            const bgMusic5 = document.getElementById('bg-music5');
            
            // Start with splash screen
            loadingProgress.style.width = '100%';
            setTimeout(() => {
                splashScreen.style.display = 'none';
                mainMenu.style.display = 'flex';
                loadSettings();
                checkSavedGame();
            }, 2000);
            
            // Initialize game
            function loadSettings() {
                const savedSettings = localStorage.getItem('tileMatchSettings');
                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);
                    state.soundEnabled = settings.soundEnabled;
                    state.musicEnabled = settings.musicEnabled;
                    state.currentMusic = settings.currentMusic || 1;
                    
                    soundToggle.checked = state.soundEnabled;
                    musicToggle.checked = state.musicEnabled;
                    musicSelector.value = state.currentMusic;
                }
                
                updateMusicPlayer();
            }
            
            function saveSettings() {
                const settings = {
                    soundEnabled: state.soundEnabled,
                    musicEnabled: state.musicEnabled,
                    currentMusic: state.currentMusic
                };
                localStorage.setItem('tileMatchSettings', JSON.stringify(settings));
            }
            
            function toggleSound() {
                state.soundEnabled = soundToggle.checked;
                saveSettings();
            }
            
            function toggleMusic() {
                state.musicEnabled = musicToggle.checked;
                saveSettings();
                updateMusicPlayer();
            }
            
            function changeMusic() {
                state.currentMusic = parseInt(musicSelector.value);
                saveSettings();
                updateMusicPlayer();
            }
            
            function updateMusicPlayer() {
                // Pause all music tracks
                bgMusic1.pause();
                bgMusic2.pause();
                bgMusic3.pause();
                bgMusic4.pause();
                bgMusic5.pause();
                
                if (state.musicEnabled) {
                    // Play selected track
                    const musicTracks = [bgMusic1, bgMusic2, bgMusic3, bgMusic4, bgMusic5];
                    const selectedTrack = musicTracks[state.currentMusic - 1];
                    selectedTrack.currentTime = 0;
                    selectedTrack.play().catch(e => console.log("Auto-play prevented:", e));
                }
            }
            
            function playSound(sound) {
                if (state.soundEnabled) {
                    sound.currentTime = 0;
                    sound.play().catch(e => console.log("Sound play prevented:", e));
                }
            }
            
            function checkSavedGame() {
                const savedGame = localStorage.getItem('tileMatchSavedGame');
                if (savedGame) {
                    state.savedGame = JSON.parse(savedGame);
                    continueBtn.disabled = false;
                } else {
                    continueBtn.disabled = true;
                }
            }
            
            function startNewGame() {
                if (!state.username) {
                    usernameInput.value = '';
                    usernameModal.classList.add('show');
                    return;
                }
                
                state.level = 1;
                state.score = 0;
                state.hintCount = 2; // Reset to 2 hints for new game
                state.savedGame = null;
                localStorage.removeItem('tileMatchSavedGame');
                initGame();
                mainMenu.style.display = 'none';
                gamePage.style.display = 'block';
                updateMusicPlayer();
            }
            
            function continueGame() {
                if (state.savedGame) {
                    state.level = state.savedGame.level;
                    state.score = state.savedGame.score;
                    state.hintCount = state.savedGame.hintCount || 2;
                    initGame();
                    mainMenu.style.display = 'none';
                    gamePage.style.display = 'block';
                    updateMusicPlayer();
                }
            }
            
            function quitToMenu() {
                saveGameState();
                mainMenu.style.display = 'flex';
                gamePage.style.display = 'none';
                checkSavedGame();
                updateMusicPlayer();
            }
            
            function saveGameState() {
                if (state.gameActive) {
                    const gameState = {
                        level: state.level,
                        score: state.score,
                        hintCount: state.hintCount,
                        board: Array.from(document.querySelectorAll('.card')).map(card => ({
                            value: card.dataset.value,
                            flipped: card.classList.contains('flipped'),
                            matched: card.classList.contains('matched')
                        }))
                    };
                    localStorage.setItem('tileMatchSavedGame', JSON.stringify(gameState));
                }
            }
            
            function saveUsername() {
                const name = usernameInput.value.trim();
                if (name) {
                    state.username = name;
                    localStorage.setItem('tileMatchUsername', name);
                    usernameModal.classList.remove('show');
                    startNewGame();
                }
            }
            
            function showLeaderboard() {
                const scores = getHighScores();
                scoreList.innerHTML = '';
                
                if (scores.length === 0) {
                    const item = document.createElement('li');
                    item.textContent = 'No scores yet!';
                    item.style.textAlign = 'center';
                    item.style.padding = '20px';
                    scoreList.appendChild(item);
                    allTimeBest.textContent = 'All-Time Best: No scores yet';
                } else {
                    // Show top 50 scores
                    scores.slice(0, 50).forEach((score, index) => {
                        const item = document.createElement('li');
                        item.className = 'score-item';
                        item.innerHTML = `
                            <span>${index + 1}. ${score.name || 'Anonymous'}</span>
                            <span>Score: ${score.score}</span>
                            <span>Level: ${score.level}</span>
                            <span>Moves: ${score.moves}</span>
                            <span>Time: ${score.timeLeft}s</span>
                        `;
                        scoreList.appendChild(item);
                    });
                    
                    // Show all-time best
                    const best = scores[0];
                    allTimeBest.textContent = `All-Time Best: ${best.score} pts by ${best.name || 'Anonymous'} (Level ${best.level}, Moves: ${best.moves}, Time: ${best.timeLeft}s)`;
                }
                
                leaderboardModal.classList.add('show');
            }
            
            function getHighScores() {
                const scores = JSON.parse(localStorage.getItem('tileMatchHighScores') || '[]');
                return scores.sort((a, b) => b.score - a.score);
            }
            
            function saveHighScore() {
                if (state.score === 0) return;
                
                const scores = getHighScores();
                scores.push({
                    name: state.username || 'Anonymous',
                    level: state.level,
                    score: state.score,
                    moves: state.moves,
                    timeLeft: state.timeLeft,
                    date: new Date().toISOString()
                });
                
                localStorage.setItem('tileMatchHighScores', JSON.stringify(scores));
            }
            
            function initGame() {
                // Reset game state
                state.matchedPairs = 0;
                state.moves = 0;
                state.time = 0;
                state.timeLimit = Math.max(30, 60 - Math.floor(state.level / 3));
                state.timeLeft = state.timeLimit;
                state.flippedCards = [];
                state.gameActive = true;
                
                // Update displays
                updateDisplays();
                
                // Clear the game board
                gameBoard.innerHTML = '';
                
                // Determine number of pairs based on level
                state.totalPairs = Math.min(4 + Math.floor(state.level / 2), 12);
                
                // Get emoji theme for current level
                const themeIndex = Math.min(Math.floor(state.level / 5), state.emojiThemes.length - 1);
                const emojiSet = [...state.emojiThemes[themeIndex]];
                const selectedEmojis = [];
                
                // Select random emojis for this game
                while (selectedEmojis.length < state.totalPairs) {
                    const randomIndex = Math.floor(Math.random() * emojiSet.length);
                    const emoji = emojiSet[randomIndex];
                    if (!selectedEmojis.includes(emoji)) {
                        selectedEmojis.push(emoji);
                        emojiSet.splice(randomIndex, 1);
                    }
                }
                
                // Create pairs
                const cards = [];
                selectedEmojis.forEach(emoji => {
                    cards.push({ type: 'normal', value: emoji });
                    cards.push({ type: 'normal', value: emoji });
                });
                
                // Shuffle cards
                shuffleArray(cards);
                
                // Create card elements
                cards.forEach((cardData, index) => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.dataset.index = index;
                    card.dataset.value = cardData.value;
                    
                    const front = document.createElement('div');
                    front.className = 'front';
                    front.textContent = cardData.value;
                    
                    const back = document.createElement('div');
                    back.className = 'back';
                    back.textContent = '?';
                    
                    card.appendChild(front);
                    card.appendChild(back);
                    
                    card.addEventListener('click', () => handleCardClick(card));
                    gameBoard.appendChild(card);
                });
                
                // Adjust grid layout based on number of cards
                const cardCount = cards.length;
                const columns = Math.min(6, Math.ceil(Math.sqrt(cardCount)));
                gameBoard.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
                
                // Start timer
                if (state.timer) {
                    clearInterval(state.timer);
                }
                state.timer = setInterval(updateTimer, 1000);
            }
            
            function updateDisplays() {
                levelDisplay.textContent = state.level;
                scoreDisplay.textContent = Math.floor(state.score);
                movesDisplay.textContent = state.moves;
                timeDisplay.textContent = state.timeLeft;
                hintCountDisplay.textContent = state.hintCount;
                timerProgress.style.width = `${(state.timeLeft / state.timeLimit) * 100}%`;
                
                // Update hint button
                if (state.hintCount <= 0) {
                    hintBtn.classList.add('ad-mode');
                    hintBtn.innerHTML = 'Get Hint (Watch Ad)';
                } else {
                    hintBtn.classList.remove('ad-mode');
                    hintBtn.innerHTML = `Hint (<span id="hint-count">${state.hintCount}</span>)`;
                }
                
                // Update timer color based on urgency
                if (state.timeLeft < state.timeLimit * 0.2) {
                    timerProgress.style.backgroundColor = 'var(--danger)';
                } else if (state.timeLeft < state.timeLimit * 0.5) {
                    timerProgress.style.backgroundColor = 'var(--warning)';
                } else {
                    timerProgress.style.backgroundColor = 'var(--primary)';
                }
            }
            
            function updateTimer() {
                if (!state.gameActive) return;
                
                state.time++;
                state.timeLeft = Math.max(0, state.timeLimit - state.time);
                updateDisplays();
                
                if (state.timeLeft <= 0) {
                    clearInterval(state.timer);
                    state.gameActive = false;
                    setTimeout(() => {
                        alert('Time\'s up! Game over.');
                        saveHighScore();
                        quitToMenu();
                    }, 500);
                }
            }
            
            function handleCardClick(card) {
                if (!state.gameActive || 
                    card.classList.contains('flipped') || 
                    card.classList.contains('matched') ||
                    state.flippedCards.length >= 2) {
                    return;
                }
                
                // Flip the card
                card.classList.add('flipped');
                playSound(flipSound);
                state.flippedCards.push(card);
                
                // If two cards are flipped, check for a match
                if (state.flippedCards.length === 2) {
                    state.moves++;
                    updateDisplays();
                    
                    const [card1, card2] = state.flippedCards;
                    
                    if (card1.dataset.value === card2.dataset.value) {
                        // Match found
                        playSound(matchSound);
                        setTimeout(() => {
                            card1.classList.add('matched');
                            card2.classList.add('matched');
                            state.flippedCards = [];
                            state.matchedPairs++;
                            
                            // Calculate score with multiplier
                            const multiplier = state.scoreMultipliers[Math.min(Math.floor(state.level / 5), state.scoreMultipliers.length - 1)];
                            state.score += Math.floor(50 * multiplier);
                            
                            // Check if all pairs are matched
                            if (state.matchedPairs === state.totalPairs) {
                                playSound(winSound);
                                clearInterval(state.timer);
                                state.gameActive = false;
                                showLevelComplete();
                            }
                            
                            updateDisplays();
                        }, 300);
                    } else {
                        // No match, flip cards back after a delay
                        setTimeout(() => {
                            card1.classList.remove('flipped');
                            card2.classList.remove('flipped');
                            state.flippedCards = [];
                        }, 1000);
                    }
                }
            }
            
            function showLevelComplete() {
                // Update level complete modal
                completeLevelDisplay.textContent = state.level;
                completeMovesDisplay.textContent = state.moves;
                completeScoreDisplay.textContent = Math.floor(state.score);
                
                // Award 1 hint for completing level
                state.hintCount += 1;
                updateDisplays();
                
                // Show level complete modal
                levelCompleteModal.style.display = 'block';
            }
            
            function nextLevel() {
                // Hide level complete modal
                levelCompleteModal.style.display = 'none';
                
                // Increase level
                state.level++;
                
                // Save high score
                saveHighScore();
                
                // Initialize next level
                initGame();
            }
            
            function useHint() {
                if (!state.gameActive) return;
                
                if (state.hintCount > 0) {
                    // Use a hint
                    state.hintCount--;
                    updateDisplays();
                    
                    // Find all unflipped, unmatched cards
                    const unflippedCards = Array.from(document.querySelectorAll('.card:not(.flipped):not(.matched)'));
                    if (unflippedCards.length < 2) return;
                    
                    // Find a matching pair to reveal
                    const values = {};
                    let matchFound = false;
                    let card1, card2;
                    
                    for (const card of unflippedCards) {
                        if (values[card.dataset.value]) {
                            card1 = values[card.dataset.value];
                            card2 = card;
                            matchFound = true;
                            break;
                        }
                        values[card.dataset.value] = card;
                    }
                    
                    if (matchFound) {
                        // Temporarily show the matching pair
                        card1.classList.add('flipped');
                        card2.classList.add('flipped');
                        
                        setTimeout(() => {
                            card1.classList.remove('flipped');
                            card2.classList.remove('flipped');
                        }, 1000);
                    }
                } else {
                    // Show ad modal to get more hints
                    adModal.classList.add('show');
                }
            }
            
            function watchAdForHint() {
                // Simulate watching an ad
                setTimeout(() => {
                    // Reward with 1 hint
                    state.hintCount += 1;
                    updateDisplays();
                    adModal.classList.remove('show');
                }, 1000);
            }
            
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            
            // Event listeners
            newGameBtn.addEventListener('click', startNewGame);
            continueBtn.addEventListener('click', continueGame);
            settingsBtn.addEventListener('click', () => settingsModal.classList.add('show'));
            leaderboardBtn.addEventListener('click', showLeaderboard);
            
            quitBtn.addEventListener('click', quitToMenu);
            hintBtn.addEventListener('click', useHint);
            nextLevelBtn.addEventListener('click', nextLevel);
            watchAdBtn.addEventListener('click', watchAdForHint);
            cancelAdBtn.addEventListener('click', () => adModal.classList.remove('show'));
            
            // Modal buttons
            soundToggle.addEventListener('change', toggleSound);
            musicToggle.addEventListener('change', toggleMusic);
            musicSelector.addEventListener('change', changeMusic);
            aboutBtn.addEventListener('click', () => {
                settingsModal.classList.remove('show');
                aboutModal.classList.add('show');
            });
            privacyBtn.addEventListener('click', () => {
                settingsModal.classList.remove('show');
                privacyModal.classList.add('show');
            });
            
            closeSettings.addEventListener('click', () => settingsModal.classList.remove('show'));
            closeAbout.addEventListener('click', () => aboutModal.classList.remove('show'));
            closePrivacy.addEventListener('click', () => privacyModal.classList.remove('show'));
            closeLeaderboard.addEventListener('click', () => leaderboardModal.classList.remove('show'));
            
            saveUsernameBtn.addEventListener('click', saveUsername);
        });
    </script>
</body>
</html>
</body>
</html>